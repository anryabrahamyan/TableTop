{% extends "base.html" %}
{% block content %}
<div class="container">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
        <h2 style="color: #2c3e50; margin: 0;">üè∞ Cafe Floor Overview</h2>
        <a href="{{ url_for('create_session', user_id=request.args.get('user_id')) }}" class="btn btn-primary">+ Create LFG Session</a>
    </div>
    
    <div class="section">
        <h3>üì¢ Recruiting Lobbies</h3>
        {% if recruiting %}
            <div class="lobby-grid">
                {% for session in recruiting %}
                <div class="game-card">
                    <div style="background: #3498db; color: white; padding: 1rem; text-align: center;">
                        <h4 style="margin: 0; color: white;">{{ session.game.title if session.game else 'Unknown Game' }}</h4>
                    </div>
                    <div class="game-card-content">
                        <p><strong>Players Needed:</strong> {{ session.slots_remaining }}/{{ session.slots_total }}</p>
                        <p><strong>Status:</strong> <span class="status-badge available">RECRUITING</span></p>
                        <a href="{{ url_for('view_session', session_id=session.id, user_id=request.args.get('user_id')) }}" class="btn btn-success" style="margin-top: auto; text-decoration: none;">‚úì Join Session</a>
                    </div>
                </div>
                {% endfor %}
            </div>
        {% elif example_sessions %}
            <div class="lobby-grid">
                {% for session in example_sessions %}
                <div class="game-card demo">
                    <div style="background: #95a5a6; color: white; padding: 1rem; text-align: center;">
                        <h4 style="margin: 0; color: white;">{{ session.game_name }}</h4>
                    </div>
                    <div class="game-card-content">
                        <p><strong>Players Needed:</strong> {{ session.slots_remaining }}/{{ session.slots_total }}</p>
                        <p><strong>Status:</strong> <span class="status-badge">RECRUITING</span></p>
                        <small style="color:#7f8c8d;">(Example data shown - create a game to get started!)</small>
                    </div>
                </div>
                {% endfor %}
            </div>
        {% else %}
            <p style="color: #7f8c8d; padding: 2rem; text-align: center;">No recruiting lobbies at the moment.</p>
        {% endif %}
    </div>

    <div class="section">
        <h3>üé≤ Active Tables</h3>
        {% if active %}
            <div class="lobby-grid">
                {% for session in active %}
                <div class="game-card">
                    <div style="background: #27ae60; color: white; padding: 1rem; text-align: center;">
                        <h4 style="margin: 0; color: white;">Table #{{ session.table_number or 'N/A' }}</h4>
                    </div>
                    <div class="game-card-content">
                        <p><strong>Game:</strong> {{ session.game.title if session.game else 'Unknown Game' }}</p>
                        <p><strong>Players:</strong> {{ session.slots_filled }}/{{ session.slots_total }}</p>
                        <span class="status-badge available">In Progress</span>
                    </div>
                </div>
                {% endfor %}
            </div>
        {% else %}
            <p style="color: #7f8c8d; padding: 2rem; text-align: center;">No active tables right now.</p>
        {% endif %}
    </div>
</div>
{% endblock %}